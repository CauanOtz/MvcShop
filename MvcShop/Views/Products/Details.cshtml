@model MvcShop.Models.Product

@{
    ViewData["Title"] = "Detalhes";
}

<div class="row">
    <div class="col-md-6">
        <div class="img-fixed mb-3" style="height:360px; overflow:hidden; border-radius:.5rem;">
            <img src="@(Model.ImageUrl ?? "https://via.placeholder.com/600x400")" alt="@Model.Name" style="width:100%; height:100%; object-fit:cover; display:block;" />
        </div>
    </div>
    <div class="col-md-6">
        <h2>@Model.Name</h2>
        <h4>@Model.Price.ToString("C")</h4>
        <p>@Model.Description</p>
        <p>Categoria: @Model.Category?.Name</p>

        <form method="post" action="/Cart/Add" class="w-50">
            <input type="hidden" name="productId" value="@Model.Id" />
            <div class="mb-3">
                <label class="form-label">Quantidade</label>
                <input type="number" name="quantity" value="1" min="1" class="form-control" />
            </div>
            <div class="d-flex gap-2">
                <button type="submit" class="btn btn-primary d-flex align-items-center">
                    <i class="fa-solid fa-cart-plus me-2 fs-5"></i>
                    <span>Adicionar ao carrinho</span>
                </button>
                <a class="btn btn-secondary" href="/Products">Voltar</a>
            </div>
        </form>
    </div>
</div>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        var form = document.querySelector('form[action="/Cart/Add"]');
        if (!form) return;
        form.addEventListener('submit', function (e) {
            var q = parseInt(this.querySelector('input[name="quantity"]').value || '1', 10);
            if (!q || q < 1) { e.preventDefault(); alert('Quantidade invÃ¡lida'); }
        });
    });
</script>
